/*! #metadata# reward-pcdn-loader: 0.1.3-bcf46e87 (Thu Apr 20 2023 08:09:20 GMT+0000 (Coordinated Universal Time)) mode: production*/
var e,t;e=window,t=function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),c=r(2),l=r(5),u=function(){function e(e){this._isLeader=!1,this.leaderLSName="pcdn-leader",this.pcdnLoaderConfigLSName="pcdn_loader_config",this.pcdnInfoLSName="pcdn-info",this.leaderLSToken=c.Utils.randomString(10),this.intervalCheckLeaderTime=s.Second.of(30).toMillisecond();var t=e.fawkesConfig,r=(t["nc_policy.uid_black_list"],n(t,["nc_policy.uid_black_list"])),i=n(e,["fawkesConfig"]);this.transparentParams=o(o({},i),{level:1,browserInfo:l.browserInfo,fawkesConfig:o({},r)}),c.Utils.pLog("initParams",this.transparentParams);var a=this.open();!1===a.status&&c.Utils.pLog("打开PCDN失败, 原因是 ",a.reason)}return e.prototype.heartbeat=function(){var e=this;c.Utils.setLocalStorage(this.leaderLSName,{token:this.leaderLSToken,timestamp:Date.now()}),this.heartbeatTimer=window.setInterval((function(){var t,r=i(c.Utils.getLocalStorageObject(e.leaderLSName),2),o=r[0],n=r[1];o||(n&&n.token!==e.leaderLSToken?Date.now()-n.timestamp<3e4&&(e.isLeader=!1,e.heartbeatTimer&&window.clearInterval(e.heartbeatTimer),e.beforeUnloadFn&&window.removeEventListener("beforeunload",e.beforeUnloadFn),null===(t=window.bpSeeder)||void 0===t||t.destroy(),window.bpSeeder=void 0):c.Utils.setLocalStorage(e.leaderLSName,{token:e.leaderLSToken,timestamp:Date.now()}))}),s.Second.of(30).toMillisecond())},e.prototype.beforeUnload=function(){function e(e){localStorage.removeItem(e)}this.beforeUnloadFn=e.bind(this,this.leaderLSName),window.addEventListener("beforeunload",e.bind(this,this.leaderLSName))},e.prototype.checkIsLeader=function(){var e=i(c.Utils.getLocalStorageObject(this.leaderLSName),2),t=e[0],r=e[1];if(t)this.isLeader=!1;else if(!this.isLeader){if(r)return r.token!==this.leaderLSToken?Date.now()-r.timestamp>s.Second.of(70).toMillisecond()?void(this.isLeader=!0):void(this.isLeader=!1):void 0;this.isLeader=!0}},e.prototype.intervalCheckLeader=function(){var e=this;this.checkIsLeader(),this.intervalCheckLeaderTimer||(this.intervalCheckLeaderTimer=window.setInterval((function(){e.checkIsLeader()}),this.intervalCheckLeaderTime))},Object.defineProperty(e.prototype,"isLeader",{get:function(){return this._isLeader},set:function(e){!1!==e?(c.Utils.pLog("I am Leader ୧(๑•̀ㅁ•́๑)૭✧"),this._isLeader=!0,this.loadSeederByVersion(),this.heartbeat(),this.beforeUnload()):this._isLeader=!1},enumerable:!1,configurable:!0}),e.prototype.loadSeederByVersion=function(){var e,t,r=i(c.Utils.getLocalStorageObject(this.pcdnLoaderConfigLSName),2),o=(r[0],r[1]);if(void 0===(null==o?void 0:o.seederEnabled)||null===o.seederEnabled||!1!==Boolean(o.seederEnabled)){var n=[this.getLocalVersion.bind(this,o),this.getABVersion.bind(this),this.getFawkesVersion.bind(this)];try{for(var s=a(n),l=s.next();!l.done;l=s.next()){var u=l.value;try{var d=u();if(d)return void this.loadSeederSDK(d)}catch(e){}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}},e.prototype.getLocalVersion=function(e){if(c.Utils.isObject(e)){var t=e.seederVersion;if("string"==typeof t&&""!==t)return t}return null},e.prototype.getABVersion=function(){var e,t,r=this.transparentParams,o=r.isPCAPP,n=r.fawkesConfig,i=o?"pc_app_ab_config":"web_ab_config",a=JSON.parse(n["reward_seeder_policy.".concat(i)]),s=o?null===(e=window.webAbTest)||void 0===e?void 0:e.seeder_pc_app_test:null===(t=window.webAbTest)||void 0===t?void 0:t.seeder_web_test;return a&&s&&a[s]?a[s]:null},e.prototype.getFawkesVersion=function(){var e=this.transparentParams,t=e.isPCAPP,r=e.fawkesConfig["reward_seeder_policy.".concat(t?"pc_app_version":"web_version")];return"string"==typeof r&&""!==r?r:null},e.prototype.loadSeederSDK=function(e){var t=this;if(window.SeederSDK)this.createSeederSDK();else{var r="//s1.hdslb.com/bfs/static/pcdn-seeder/reward-seeder-".concat(e,".min.js");this.loadScript({url:r,success:function(){t.createSeederSDK()}},window)}},e.prototype.createSeederSDK=function(){window.bpSeeder||(window.bpSeeder=new window.SeederSDK(this.transparentParams))},e.prototype.loadScript=function(e,t){void 0===t&&(t=window);var r=t.document.createElement("script");return r.onload=e.success||c.Utils.noop,r.onerror=e.error||c.Utils.noop,r.src=e.url,t.document.head.appendChild(r),r},e.prototype.open=function(){var t={currentKernel:null===l.browserInfo||void 0===l.browserInfo?void 0:l.browserInfo.name,configKernel:e.enabledBrowserList,currentVersion:null===l.browserInfo||void 0===l.browserInfo?void 0:l.browserInfo.version,configVersion:null===l.browserInfo||void 0===l.browserInfo?void 0:l.browserInfo.version},r=function(e){return{status:!1,reason:{statusCode:e,details:t}}};if(!1===c.Utils.hasProperty(this.transparentParams,["aid","cid","bvid","isPCAPP","fawkesConfig"])||!1===c.Utils.isObject(this.transparentParams.fawkesConfig))return c.Utils.pLog("初始化参数错误!!!",this.transparentParams),r(0);var o=e.checkCompatibility();return!1===o.status?r(o.statusCode):(c.Utils.setLocalStorage(this.pcdnInfoLSName,{level:this.transparentParams.level}),this.intervalCheckLeader(),{status:!0})},e.checkCompatibility=function(){if(!c.Utils.checkLocalStorage())return{status:!1,statusCode:5};if(!l.browserInfo)return{status:!1,statusCode:3};var t=l.browserInfo.name,r=l.browserInfo.version;return"all"===e.enabledBrowserList||e.enabledBrowserList.includes(t)?r<{chromium:57,chrome:57,"edge-chromium":57,safari:11,edge:79,firefox:44}[t]?{status:!1,statusCode:2}:{status:!0}:{status:!1,statusCode:1}},e.enabledBrowserList="all",e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Day=t.Hour=t.Minute=t.Second=t.MilliSecond=void 0;var o=function(){function e(e){this.value=e}return e.of=function(t){return new e(t)},e.raw=function(e){return e},e}();t.MilliSecond=o;var n=function(){function e(e){this.value=e}return e.prototype.toMillisecond=function(){return o.raw(1e3*this.value)},e.of=function(t){return new e(t)},e.raw=function(e){return e},e}();t.Second=n;var i=function(){function e(e){this.value=e}return e.prototype.toSecond=function(){return n.raw(60*this.value)},e.prototype.toMillisecond=function(){return o.raw(60*this.value*1e3)},e.of=function(t){return new e(t)},e.raw=function(e){return e},e}();t.Minute=i;var a=function(){function e(e){this.value=e}return e.prototype.toSecond=function(){return n.raw(60*this.value*60)},e.prototype.toMillisecond=function(){return o.raw(60*this.value*60*1e3)},e.of=function(t){return new e(t)},e}();t.Hour=a;var s=function(){function e(e){this.value=e}return e.prototype.toSecond=function(){return n.raw(24*this.value*60*60)},e.prototype.toMillisecond=function(){return o.raw(24*this.value*60*60*1e3)},e.of=function(t){return new e(t)},e}();t.Day=s},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var s=a(r(3)),c=r(4),l=function(){function e(){}return e.isSupportP2P=function(){var t,r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,o=null===(t=window.RTCDataChannel)||void 0===t?void 0:t.prototype.send;return!!(window.indexedDB&&(null==r?void 0:r.prototype.createDataChannel)&&o&&e.checkLocalStorage())},e.checkLocalStorage=function(){try{return localStorage.getItem("happy"),!0}catch(e){return!1}},e.getLocalStorage=function(e){return localStorage[e]&&"getItem"!==e?localStorage[e]:localStorage.getItem(e)},e.getLocalStorageObject=function(t){return e.tryCatchSync(JSON.parse,e.getLocalStorage(t)||null)},e.setLocalStorage=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.tryCatchSync=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];try{return[null,e.apply(void 0,i([],n(t),!1))]}catch(e){return[e]}},e.randomString=function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return Array.from({length:e},(function(){return t[Math.floor(Math.random()*t.length)]})).join("")},e.configureLog=function(){var e=new Date,t="LoaderLog-[v".concat(s.default.getInstance().version,"]-[").concat(e.toTimeString().slice(0,8),"-").concat(e.getTime(),"]");return o({baseLog:t},c.PCDNUtils.getPCDNConfig())},e.pLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=["color: #fff","background-color: #ee89b3","padding: 2px 4px","border-radius: 2px"],o="%cPCDN Logs",a=this.configureLog(),s=a.baseLog,c=a.showLoaderLog;c>=1&&console.log.apply(console,i([o,r.join(";"),s],n(e),!1))},e.getCookie=function(e){if(null==e)return"";for(var t=document.cookie.split(";"),r=decodeURIComponent(e),o=0;o<t.length;o++){var i=n(t[o].trim().split("="),2),a=i[0],s=i[1];if(decodeURIComponent(a)===r)return decodeURIComponent(s)}return""},e.hasProperty=function(e,t){return t.every((function(t){return Object.prototype.hasOwnProperty.call(e||{},t)}))},e.noop=function(){},e}();t.Utils=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"reward-pcdn-loader",version:"0.1.3",hash:"bcf46e8",branch:"Detached: bcf46e874f7bc5c5dc95d7e7ce4cc25144fe4c6e",lastModified:"Thu Apr 20 2023 08:09:20 GMT+0000 (Coordinated Universal Time)",mode:"production"},n=function(){function e(){this.version=o.version+"-"+o.hash.slice(0,8)}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.reset=function(){},e.BLOCK_SIZE=1048576,e}();t.default=n},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.PCDNUtils=void 0;var i=function(){function e(){}return e.getPCDNConfig=function(){try{return o({showLoaderLog:0,showLeecherLog:0,showSeederLog:0},JSON.parse(localStorage.getItem("pcdn_config")||"{}"))}catch(e){return{showLoaderLog:0,showLeecherLog:0,showSeederLog:0}}},e.isChrome=function(){var e=navigator.userAgent;return-1===e.indexOf("Edge")&&e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1},e.isChromeAboveCertainVersion=function(e){var t,r=null===(t=navigator.userAgent.match(/(?:crios|crmo|chrome)\/([0-9]+)/i))||void 0===t?void 0:t[1],o=parseInt(r);return!(Number.isNaN(o)||o<e)},e.getCookie=function(e){if(null==e)return"";for(var t=document.cookie.split(";"),r=decodeURIComponent(e),o=0;o<t.length;o++){var i=n(t[o].trim().split("="),2),a=i[0],s=i[1];if(decodeURIComponent(a)===r)return decodeURIComponent(s)}return""},e.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.getLocalStorage=function(e){return localStorage[e]&&"getItem"!==e?localStorage[e]:localStorage.getItem(e)},e.getLocalObject=function(t){try{return JSON.parse(e.getLocalStorage(t))}catch(e){return null}},e.setLocalObject=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e}();t.PCDNUtils=i},function(e,t,r){"use strict";var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.browserInfo=void 0;var n=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,i=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]];t.browserInfo=void 0!==window.navigator?function(e){var t=function(e){return""!==e&&i.reduce((function(t,r){var n=o(r,2),i=n[0],a=n[1];if(t)return t;var s=a.exec(e);return!!s&&[i,s]}),!1)}(e);if(!t)return null;var r=o(t,2),a=r[0],s=r[1];if("searchbot"===a)return null;var c=n.exec(e);if(c&&c[1])return null;var l=s[1]&&s[1].split(".").join("_").split("_").slice(0,3),u=l?parseInt(l[0]):NaN;return{name:["chrome","edge-chromium"].includes(a)?"chromium":a,version:u}}(window.navigator.userAgent):null}]).default},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PCDNLoader",[],t):"object"==typeof exports?exports.PCDNLoader=t():e.PCDNLoader=t();